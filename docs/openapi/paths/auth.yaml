register:
  post:
    summary: Register a new user
    description: Create a user account with a username, email, and password.
    operationId: registerUser
    tags: [auth]
    requestBody:
      description: Registration payload.
      required: true
      content:
        application/json:
          schema:
            type: object
            required: [username, email, password]
            properties:
              username: { type: string }
              email: { type: string }
              password: { type: string, format: password }
    responses:
      "201":
        description: User created
        content:
          application/json:
            schema:
              $ref: ../openapi.yaml#/components/schemas/User
      "400":
        description: Validation error
        content:
          application/json:
            schema:
              $ref: ../openapi.yaml#/components/schemas/ValidationError
      "409":
        description: Username or email already taken
        content:
          application/json:
            schema:
              $ref: ../openapi.yaml#/components/schemas/ConflictError

login:
  post:
    summary: Login
    description: Authenticate a user with email and password credentials.
    operationId: loginUser
    tags: [auth]
    requestBody:
      description: Login credentials.
      required: true
      content:
        application/json:
          schema:
            type: object
            required: [email, password]
            properties:
              email: { type: string }
              password: { type: string, format: password }
    responses:
      "200":
        description: Login successful
        content:
          application/json:
            schema:
              $ref: ../openapi.yaml#/components/schemas/User
      "401":
        description: Invalid credentials
        content:
          application/json:
            schema:
              $ref: ../openapi.yaml#/components/schemas/AuthError
